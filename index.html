<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="app-title">Hyper Availability Profile (HAP)</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@700&family=Roboto+Mono:wght@400;700&family=Playfair+Display:wght@700&display=swap');

        :root {
            --primary: #0ea5e9; --primary-light: #f0f9ff; --primary-dark: #0369a1;
            --bg: #f8fafc; --card: #ffffff; --text: #0f172a; --muted: #64748b;
            --border-color: #e2e8f0; --input-bg: #f1f5f9;
            --radius: 12px; --shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            --pfp-bg-day: var(--primary-light);
            --pfp-border-day: var(--primary);
            --link-text-color: #0369a1;
            --display-font: 'Inter', sans-serif;
            --profile-header-bg-style: var(--card);
        }

        body.dark {
            --primary: #38bdf8; --primary-light: #1e293b; --primary-dark: #7dd3fc;
            --bg: #020617; --card: #0f172a; --text: #e2e8f0; --muted: #94a3b8;
            --border-color: #334155; --input-bg: #1e293b;
        }
        
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes fadeSlideUp { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes spin { 100% { transform: rotate(360deg); } }
        
        .page.active { animation: fadeIn 0.5s ease-out forwards; }
        .card, .history-item, .search-result-item { animation: fadeSlideUp 0.6s ease-out forwards; animation-delay: 0.1s; opacity: 0; transform: translateY(15px); }

        html { font-size: 16px; scroll-behavior: smooth; }
        body {
            margin: 0; padding: 20px 0 100px 0;
            font-family: var(--display-font);
            background: var(--bg); color: var(--text);
            -webkit-font-smoothing: antialiased;
            transition: background-color 0.4s, color 0.4s;
        }

        header {
            padding: 10px 14px; display: flex; gap: 12px; align-items: center; justify-content: center;
            background: var(--card); box-shadow: 0 -4px 12px rgba(0,0,0,0.05);
            position: fixed; bottom: 0; left: 0; right: 0;
            z-index: 100; border-top: 1px solid var(--border-color);
            transition: transform 0.4s ease-in-out, background-color 0.4s;
        }
        header.hidden { transform: translateY(100%); }
        nav { display: flex; gap: 8px; align-items: center; width: 100%; max-width: 500px; justify-content: space-around; }
        .nav-btn {
            background: transparent; border: none; padding: 8px 10px; border-radius: 8px;
            cursor: pointer; color: var(--muted); font-weight: 500; font-size: 0.9rem;
            display: flex; flex-direction: column; align-items: center; gap: 4px;
            transition: all 0.2s ease;
        }
        .nav-btn.active { background: var(--primary-light); color: var(--primary-dark); }
        .nav-btn:hover { color: var(--primary-dark); transform: translateY(-2px); }
        .nav-btn svg { width: 24px; height: 24px; }

        .container { max-width: 700px; margin: 0 auto; padding: 0 14px; }
        .page { display: none; }
        .page.active { display: block; }
        .card { background: var(--card); border-radius: var(--radius); box-shadow: var(--shadow); padding: 20px; margin-bottom: 20px; transition: background-color 0.4s; }

        h1 { font-size: 2.25rem; font-weight: 700; margin: 0 0 8px 0; text-align: center; }
        h2 { font-size: 1.5rem; font-weight: 600; margin: 0 0 16px 0; padding-bottom: 12px; border-bottom: 1px solid var(--border-color); }
        h3 { font-size: 1.2rem; font-weight: 600; margin-top: 20px; }
        p { color: var(--muted); line-height: 1.6; margin: 4px 0; }
        label { display: block; margin-bottom: 8px; font-weight: 500; color: var(--muted); }

        input, select, textarea, button { font-size: 1rem; font-family: inherit; }
        input[type="text"], input[type="email"], input[type="password"], input[type="url"], input[type="number"], input[type="time"], input[type="date"], input[type="tel"], select, textarea {
            width: 100%; box-sizing: border-box; padding: 12px; border-radius: 8px;
            border: 1px solid var(--border-color); background: var(--input-bg); color: var(--text);
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        textarea { resize: vertical; min-height: 80px; }
        input[type="color"] { width: 100%; height: 44px; padding: 0; border: none; background: transparent; cursor: pointer; }
        input:focus, select:focus, textarea:focus { outline: 2px solid var(--primary); border-color: var(--primary); }
        input[type="file"] { padding: 10px; }
        .form-field-disabled, .form-field-disabled > * { opacity: 0.6; pointer-events: none; }
        .form-field-disabled label { text-decoration: line-through; }
        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        @media (max-width: 600px) { .form-grid { grid-template-columns: 1fr; } }


        #loginPage .card { margin-top: 40px; }
        .auth-tabs { display: flex; margin-bottom: 25px; border-radius: 10px; background: var(--input-bg); padding: 5px; }
        .tab { flex: 1; padding: 12px; text-align: center; cursor: pointer; border-radius: 8px; font-weight: 500; transition: background-color 0.3s ease, color 0.3s; }
        .tab.active { background-color: var(--primary); color: #fff; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
        .social-login-btn { margin-top: 10px; background: #4285F4; color: white; border: none; padding: 10px; border-radius: 8px; cursor: pointer; font-weight: 500; display: flex; align-items: center; justify-content: center; gap: 10px; }
        .social-login-btn:hover { background: #3c7ceb; }

        .profile-header { text-align: center; margin-bottom: 30px; background: var(--profile-header-bg-style); transition: background 0.5s ease; padding: 20px; }
        #profile-pfp {
            width: 96px; height: 96px; border-radius: 50%; margin: 0 auto 16px auto;
            background-color: var(--pfp-bg-day); background-size: cover; background-position: center;
            border: 3px solid var(--pfp-border-day); transition: all 0.4s;
            display: flex; justify-content: center; align-items: center;
            font-size: 3rem; font-weight: 700; color: var(--primary-dark);
        }
        .profile-emoji { font-size: 4rem; line-height: 1; margin: 16px 0; }
        
        .profile-name { 
            font-weight: 700; margin: 0; font-family: var(--display-font); 
            display: flex; justify-content: center; align-items: center; 
            font-size: 2.25rem;
            color: var(--text);
        }
        .profile-name.is-owner { color: #ef4444; }
        
        #profile-organization-link a {
            color: var(--muted);
            font-weight: 500;
            text-decoration: none;
            display: inline-block;
            margin-top: 8px;
            padding: 4px 10px;
            border-radius: 6px;
            background-color: var(--input-bg);
            transition: all 0.2s ease;
        }
        #profile-organization-link a:hover {
            color: var(--primary-dark);
            background-color: var(--primary-light);
        }

        .role-badge-container {
            display: flex; justify-content: center; align-items: center;
            gap: 8px; margin: 5px auto 16px auto; flex-wrap: wrap;
        }
        
        .membership-badge {
            font-size: 0.8rem; font-weight: 700; padding: 4px 10px; 
            border-radius: 6px; color: white;
        }
        .tier-Member { background-color: #64748b; }
        .tier-Plus { background-color: #a855f7; }
        .tier-Pro { background: linear-gradient(45deg, #f59e0b, #fbbf24); }
        .tier-Max { background: linear-gradient(45deg, #4f46e5, #7c3aed); }
        .tier-Owner { background-color: #ef4444; }
        
        .inline-verified-icon {
            color: #0ea5e9; margin-left: 8px;
            width: 24px; height: 24px; flex-shrink: 0;
        }

        .profile-message { font-size: 1.2rem; color: var(--muted); min-height: 28px; }
        .profile-timer { font-size: 2.5rem; color: var(--primary); font-weight: 700; margin-top: 24px; min-height: 40px; }
        .profile-country { display: flex; align-items: center; justify-content: center; gap: 8px; font-weight: 500; margin-top: 10px; }
        .profile-country .flag-emoji { font-size: 1.5rem; }

        .custom-link {
            display: inline-flex; align-items: center; gap: 8px; background: var(--primary-light);
            padding: 10px 15px; border-radius: 8px; text-decoration: none; color: var(--link-text-color);
            font-weight: 500; transition: all 0.2s ease;
        }
        .custom-link:hover { background-color: var(--primary); color: #fff; transform: translateY(-2px); }
        .custom-link svg { width: 18px; height: 18px; }
        .action-links-container { display: flex; flex-wrap: wrap; justify-content: center; gap: 12px; margin-top: 20px; }
        .personal-detail-item { font-size: 1rem; padding: 8px 0; border-bottom: 1px dashed var(--border-color); }

        .link-group, .privacy-group { display: grid; grid-template-columns: 1fr 2fr; gap: 10px; margin-bottom: 15px; align-items: center; }
        @media (max-width: 500px) { .link-group, .privacy-group { grid-template-columns: 1fr; } }

        .timetable-entry-card { background: var(--input-bg); border-radius: 8px; padding: 12px; margin-bottom: 8px; }

        .country-select-wrapper { position: relative; }
        .country-dropdown {
            position: absolute; top: 100%; left: 0; right: 0;
            background: var(--card); border: 1px solid var(--border-color); border-radius: 8px;
            max-height: 200px; overflow-y: auto; z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .country-option { padding: 10px; cursor: pointer; display: flex; align-items: center; gap: 10px; }
        .country-option:hover { background: var(--input-bg); }
        .country-option .flag-emoji { font-size: 1.2rem; }

        .analytics-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(130px, 1fr)); gap: 15px; margin-top: 20px; }
        .analytics-metric { background: var(--input-bg); padding: 15px; border-radius: 8px; text-align: center; border: 1px solid var(--border-color); }
        .metric-value { font-size: 2rem; font-weight: 700; color: var(--primary); margin: 0 0 5px 0; }
        .metric-label { font-size: 0.9rem; color: var(--muted); font-weight: 500; }

        .history-item { padding: 10px 0; border-left: 3px solid var(--border-color); margin-left: 10px; padding-left: 15px; position: relative; }
        .history-item:before {
            content: ''; position: absolute; left: -8px; top: 15px;
            width: 13px; height: 13px; background: var(--primary); border-radius: 50%;
            border: 3px solid var(--card); box-shadow: 0 0 0 2px var(--primary);
        }
        .history-status { font-weight: 600; color: var(--text); display: block; }
        .history-time { font-size: 0.8rem; color: var(--muted); }
        .search-result-item { display: flex; justify-content: space-between; align-items: center; padding: 15px; border-bottom: 1px solid var(--border-color); }
        .search-result-item a { text-decoration: none; font-weight: 600; color: var(--primary); }

        footer { margin-top: 40px; text-align: center; color: var(--muted); font-size: 0.9rem; padding: 20px 0; border-top: 1px solid var(--border-color); }
        footer a { color: var(--primary); text-decoration: none; margin: 0 5px; }
        footer a:hover { text-decoration: underline; }

        .hidden { display: none !important; }
        #error-message { color: #ef4444; text-align: center; min-height: 24px; font-weight: bold; margin-top: 15px; }
        #toast {
            position: fixed; bottom: 100px; left: 50%; transform: translateX(-50%) translateY(20px);
            background: #0f172a; color: white; padding: 12px 20px; border-radius: 8px;
            z-index: 3000; visibility: hidden; opacity: 0; transition: all 0.4s ease;
            text-align: center; box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }
        #toast.show { visibility: visible; opacity: 1; transform: translateX(-50%) translateY(0); }

        #global-error-display {
            position: fixed; top: 0; left: 0; right: 0; padding: 15px;
            background: #f87171; color: white; text-align: center; font-weight: bold;
            z-index: 5000; display: none; border-bottom: 2px solid #ef4444;
        }
        
        .btn-loading { pointer-events: none; opacity: 0.8; }
        .btn-loading::after {
            content: ""; border: 3px solid rgba(255, 255, 255, 0.3);
            border-top: 3px solid white; border-radius: 50%;
            width: 16px; height: 16px; animation: spin 1s linear infinite;
        }
        .admin-table { width: 100%; border-collapse: collapse; margin-top: 20px; font-size: 0.9rem; }
        .admin-table th, .admin-table td { padding: 12px; border: 1px solid var(--border-color); text-align: left; }
        .admin-table th { background-color: var(--input-bg); }
        .admin-table select { padding: 6px; }

        .achievement-item { margin-bottom: 15px; }
        .achievement-progress { width: 100%; background: var(--input-bg); border-radius: 8px; height: 10px; overflow: hidden; margin-top: 6px; }
        .progress-bar { height: 100%; background: var(--primary); border-radius: 8px; transition: width 0.5s ease; }
        
        .verification-request-card { background: var(--input-bg); padding: 15px; border-radius: 8px; margin-bottom: 15px; }
        .verification-request-card p { margin: 0 0 10px 0; }
        .verification-actions { display: flex; gap: 10px; margin-top: 10px; }
        
        .tier-plan-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 20px; }
        .tier-plan-card { background: var(--input-bg); padding: 20px; border-radius: var(--radius); border: 1px solid var(--border-color); }
        .tier-plan-card h3 { margin-top: 0; display: flex; align-items: center; gap: 8px; }
        .tier-plan-card ul { list-style-type: '✓ '; padding-left: 20px; color: var(--muted); }
        .tier-plan-card ul li { margin-bottom: 8px; }

        #org-banner { width: 100%; height: 150px; background-size: cover; background-position: center; border-radius: var(--radius) var(--radius) 0 0; background-color: var(--input-bg); }
        #org-logo { width: 80px; height: 80px; border-radius: 50%; margin: -40px auto 10px auto; border: 4px solid var(--card); background-color: var(--card); display: block; background-size: cover; background-position: center; }
        .org-member-item { display: flex; align-items: center; gap: 12px; padding: 10px 0; border-bottom: 1px solid var(--border-color); }
        .org-member-pfp { width: 40px; height: 40px; border-radius: 50%; background-color: var(--input-bg); background-size: cover; background-position: center; display: flex; align-items: center; justify-content: center; font-weight: bold; }
    </style>
</head>
<body>

    <div id="global-error-display">A critical error occurred. Check the console for details.</div>

    <header id="mainHeader" class="hidden">
        <nav>
            <button class="nav-btn" data-page="profilePage" id="profile-nav-btn">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2.5a5.5 5.5 0 0 1 3.096 10.047 9.005 9.005 0 0 1 5.9 8.181.75.75 0 0 1-1.498.07 7.502 7.502 0 0 0-15 0 .75.75 0 0 1-1.498-.07A9.005 9.005 0 0 1 9 12.55a5.5 5.5 0 0 1 3-10.05ZM12 4a4 4 0 1 0 0 8 4 4 0 0 0 0-8Z"></path></svg>
                <span>Profile</span>
            </button>
            <button class="nav-btn" data-page="organizationDashboardPage" id="org-dashboard-nav-btn">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M4.5 6.375a.75.75 0 0 1 .75-.75h13.5a.75.75 0 0 1 .75.75v9a.75.75 0 0 1-.75.75H5.25a.75.75 0 0 1-.75-.75v-9Z"></path><path fill-rule="evenodd" d="M22.5 12c0-5.422-4.235-9.844-9.513-10.451a.75.75 0 0 0-.674.807 9.002 9.002 0 0 1-1.623 8.195.75.75 0 0 0 .341 1.018 10.46 10.46 0 0 1 5.341 5.341.75.75 0 0 0 1.018.341 9.002 9.002 0 0 1 8.195-1.623.75.75 0 0 0 .807-.674A10.5 10.5 0 0 0 22.5 12Z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M1.5 12c0 5.422 4.235 9.844 9.513 10.451a.75.75 0 0 0 .674-.807 9.002 9.002 0 0 1 1.623-8.195.75.75 0 0 0-.341-1.018 10.46 10.46 0 0 1-5.341-5.341.75.75 0 0 0-1.018-.341A9.002 9.002 0 0 1 1.549 4.97a.75.75 0 0 0-.807.674A10.5 10.5 0 0 0 1.5 12Z" clip-rule="evenodd"></path></svg>
                <span>Dashboard</span>
            </button>
            <button class="nav-btn" data-page="tiersPage" id="tiers-nav-btn">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M11.47 1.72a.75.75 0 0 1 1.06 0l3 3a.75.75 0 0 1-1.06 1.06l-1.72-1.72V7.5h-1.5V4.06L9.53 5.78a.75.75 0 0 1-1.06-1.06l3-3ZM11.25 7.5V15a.75.75 0 0 0 1.5 0V7.5h3.75a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-9a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h3.75Z"></path></svg>
                <span>Tiers</span>
            </button>
            <button class="nav-btn" data-page="searchPage">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path fill-rule="evenodd" d="M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z" clip-rule="evenodd"></path></svg>
                <span>Search</span>
            </button>
            <button class="nav-btn" data-page="settingsPage" id="settings-nav-btn">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M11.64 3.023a.75.75 0 0 1 .72 0l1.517.65a.75.75 0 0 0 .841-.252l1.11-1.48A.75.75 0 0 1 17 2.25a.75.75 0 0 1 .633.368l1.11 1.48a.75.75 0 0 0 .84.253l1.518-.65a.75.75 0 0 1 .72 0l1.016.436a.75.75 0 0 1 .45 1.033l-.74 1.385a.75.75 0 0 0 .14.925l1.28.96a.75.75 0 0 1 0 1.302l-1.28.96a.75.75 0 0 0-.14.925l.74 1.385a.75.75 0 0 1-.45 1.033l-1.017.436a.75.75 0 0 1-.72 0l-1.517-.65a.75.75 0 0 0-.84.252l-1.11 1.48A.75.75 0 0 1 17 21.75a.75.75 0 0 1-.633-.368l-1.11-1.48a.75.75 0 0 0-.84-.253l-1.518.65a.75.75 0 0 1-.72 0l-1.016-.436a.75.75 0 0 1-.45-1.033l.74-1.385a.75.75 0 0 0-.14-.925l-1.28-.96a.75.75 0 0 1 0-1.302l1.28.96a.75.75 0 0 0 .14-.925l-.74-1.385a.75.75 0 0 1 .45-1.033l1.017-.436ZM12 15.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7Z"></path></svg>
                <span>Settings</span>
            </button>
            <button id="admin-nav-btn" class="nav-btn hidden" data-page="adminPage">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path fill-rule="evenodd" d="M4.5 2.25a.75.75 0 0 0 0 1.5v16.5a.75.75 0 0 0 0 1.5h15a.75.75 0 0 0 0-1.5V3.75a.75.75 0 0 0 0-1.5h-15ZM5.25 21a1.5 1.5 0 0 0 1.5-1.5V3.75A1.5 1.5 0 0 0 5.25 2.25h-1.5A3 3 0 0 0 .75 5.25v13.5A3 3 0 0 0 3.75 21h1.5Zm15-1.5V3.75A1.5 1.5 0 0 0 18.75 2.25h-1.5a.75.75 0 0 0 0 1.5h1.5c.414 0 .75.336.75.75v16.5c0 .414-.336.75-.75.75h-1.5a.75.75 0 0 0 0 1.5h1.5a3 3 0 0 0 3-3V5.25a3 3 0 0 0-3-3h-1.5ZM8.25 7.5a.75.75 0 0 0 0 1.5h7.5a.75.75 0 0 0 0-1.5h-7.5Zm.75 3.75a.75.75 0 0 1 .75-.75h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1-.75-.75Z" clip-rule="evenodd" /></svg>
                <span>Admin</span>
            </button>
        </nav>
    </header>

    <div class="container">

        <div id="loginPage" class="page">
            <div class="card">
                <h1>Hyper Availability</h1>
                <p style="text-align: center;">Your real-time public status page.</p>
                <div class="auth-tabs">
                    <div class="tab active" data-tab="login">Login</div>
                    <div class="tab" data-tab="signup">Sign Up</div>
                </div>

                <div id="login-form-container">
                    <form id="login-form">
                        <div class="form-group"><input type="email" id="login-email" placeholder="Email" required></div>
                        <div class="form-group"><input type="password" id="login-password" placeholder="Password" required></div>
                        <button type="submit" class="btn">Login</button>
                    </form>
                </div>
                
                <div id="signup-choice-container" class="hidden" style="text-align: center;">
                    <h2>How would you like to sign up?</h2>
                    <div style="display: flex; flex-direction: column; gap: 10px; margin-top: 20px;">
                         <button id="show-personal-signup" class="btn">Personal Account</button>
                         <button id="show-org-signup" class="btn secondary">Organization Account</button>
                    </div>
                </div>

                <form id="signup-form" class="hidden">
                    <h3>Create Personal Account</h3>
                    <div class="form-group"><input type="text" id="signup-name" placeholder="Display Name" required></div>
                    <div class="form-group"><input type="email" id="signup-email" placeholder="Email" required></div>
                    <div class="form-group"><input type="password" id="signup-password" placeholder="Password (min. 6 chars)" required></div>
                    <button type="submit" class="btn">Create Personal Account</button>
                </form>
                
                <form id="org-signup-form" class="hidden">
                    <h3>Create Organization Account</h3>
                    <div class="form-group"><input type="text" id="org-signup-name" placeholder="Organization Name (Mandatory)" required></div>
                    <div class="form-group"><input type="email" id="org-signup-email" placeholder="Organization Login Email (Mandatory)" required></div>
                    <div class="form-group"><input type="password" id="org-signup-password" placeholder="Password (min. 6 chars)" required></div>
                    <div class="form-group">
                        <label for="org-signup-country-search">Country / Region (Mandatory)</label>
                        <div class="country-select-wrapper">
                            <input type="text" id="org-signup-country-search" placeholder="Search for a country..." required>
                            <div id="org-signup-country-dropdown" class="country-dropdown hidden"></div>
                        </div>
                        <input type="hidden" id="org-signup-country-code">
                    </div>
                    <button type="submit" class="btn">Create Organization</button>
                </form>

                <button id="google-login-btn" class="social-login-btn">
                    <svg viewBox="0 0 24 24" width="24" height="24" style="background: white; border-radius: 50%; padding: 4px;"><path fill="#EA4335" d="M5.266 9.389a6.6 6.6 0 0 1 .235-1.565h3.08v3.136H5.266z"></path><path fill="#4285F4" d="M12 21.36c-2.333 0-4.32-.778-5.755-2.072L9.36 17.06c.9.605 2.07 1.05 3.398 1.05 2.872 0 4.673-1.637 4.673-3.957 0-1.724-.96-2.91-2.5-3.69v-3.3h3.045c2.324 0 3.86 1.764 3.86 5.25 0 4.8-3.045 7.027-7.426 7.027z"></path><path fill="#FBBC05" d="M12 7.03c1.64 0 2.977.674 3.69 1.344l2.42-2.348C17.042 4.417 15.02 3 12 3 7.61 3 4.195 5.253 2.57 9.172l3.045 2.368c.57-1.897 2.37-3.67 6.385-3.67z"></path><path fill="#34A853" d="M5.504 12.87a6.22 6.22 0 0 1-.238-1.564H2.227v3.136h3.277z"></path></svg>
                    Login with Google (Personal)
                </button>
                
                <p id="error-message"></p>
            </div>
        </div>

        <div id="profilePage" class="page">
            <div class="card profile-header" style="padding: 0; overflow: hidden;">
                <div id="org-banner"></div>
                <div id="profile-pfp"></div> 
                
                <div style="padding: 0 20px 20px 20px;">
                    <h1 class="profile-name" id="profile-name">Loading...</h1>
                    <div id="role-and-verified-container" class="role-badge-container">
                        <div id="membership-tier-display" class="membership-badge"></div>
                    </div>
                    <div id="profile-organization-link"></div>
                    <div class="profile-emoji" id="profile-emoji">❓</div>
                    <p class="profile-message" id="profile-message">Fetching status...</p>
                    <div class="profile-timer" id="profile-timer"></div>
                    <p class="local-time-display" id="local-time-info" style="font-size: 1rem; margin-top: 10px; font-weight: 500;"></p>
                </div>
            </div>

            <div class="card action-links-container" id="profile-action-links"></div>

            <div class="card">
                <h2>About</h2>
                <div id="personal-details-list">
                    <p class="muted">Loading personal info...</p>
                </div>
            </div>

            <div class="card">
                <h2>Custom Links</h2>
                <div id="profile-links"><p class="muted">No links provided.</p></div>
            </div>

            <div class="card">
                <h2>Share Profile</h2>
                <div style="text-align: center;">
                    <div id="qrcode-container" style="display: inline-block; padding: 15px; background: var(--card); border-radius: 8px; border: 1px solid var(--border-color); min-height: 230px;">
                        <img id="profile-qrcode-img" width="200" height="200" style="display: none; border-radius: 4px;" alt="Profile QR Code"> 
                        <p id="qrcode-placeholder" class="muted">Click button below to generate QR.</p>
                    </div>
                </div>
                <button id="generate-qrcode-btn" class="btn secondary" style="margin-top: 15px;">Generate QR Code</button>
                <button id="share-status-btn" class="btn" style="margin-top: 10px;">Copy Profile Link</button>
            </div>

            <div class="card hidden" id="create-hap-promo">
                <h3 style="text-align: center;">Like this status page?</h3>
                <p style="text-align: center;">Create your own real-time availability profile in seconds!</p>
                <div style="display: flex; justify-content: center; margin-top: 15px;">
                    <button class="btn" id="promo-action-btn" style="flex: 0 1 250px;"></button>
                </div>
            </div>
        </div>
        
        <div id="searchPage" class="page">
            <div class="card">
                <h2>HAP Directory 🌐</h2>
                <div class="form-group" style="margin-bottom: 0;">
                    <input type="text" id="user-search-input" placeholder="Search users or organizations...">
                </div>
                <button id="run-search-btn" class="btn secondary" style="margin-top: 10px;">Search / Load Directory</button>
                <div id="search-results-list" style="margin-top: 20px;">
                    <p class="muted">Search for users by name or click 'Search' to view all public profiles.</p>
                </div>
            </div>
        </div>

        <div id="analyticsPage" class="page">
            <div class="card">
                <h2>Profile View Analytics 📈</h2>
                <div class="analytics-grid" id="view-analytics-grid">
                    <div class="analytics-metric"><p class="metric-value" id="views-total">0</p><p class="metric-label">Total Views</p></div>
                    <div class="analytics-metric"><p class="metric-value" id="views-today">0</p><p class="metric-label">Views Today</p></div>
                    <div class="analytics-metric"><p class="metric-value" id="views-week">0</p><p class="metric-label">Views Last 7 Days</p></div>
                    <div class="analytics-metric"><p class="metric-value" id="views-month">0</p><p class="metric-label">Views Last 30 Days</p></div>
                </div>
            </div>
            <div class="card">
                <h2>Status History Timeline (Last 10)</h2>
                <div id="history-log"><p class="muted">Loading history...</p></div>
            </div>
        </div>

        <div id="tiersPage" class="page">
            <div class="card">
                <h2>My Tier & Progress</h2>
                <div id="my-plan-details"><p class="muted">Loading your plan details...</p></div>
            </div>
            <div class="card">
                <div id="my-plan-progress"><p class="muted">Loading your achievement progress...</p></div>
            </div>
            <div class="card">
                 <h2>All Tiers & Benefits</h2>
                 <div id="all-tiers-info"><p class="muted">Loading all tiers...</p></div>
            </div>
        </div>

        <div id="organizationsPage" class="page"></div>
        <div id="orgDashboardPage" class="page"></div>

        <div id="adminPage" class="page">
            <div class="card">
                <h2>👑 Admin Panel</h2>
                <p class="muted">Manage users, organizations, and verification requests.</p>
            </div>
            <div class="card">
                <h2>Verification Requests</h2>
                <div id="admin-verification-requests"><p class="muted">Loading requests...</p></div>
            </div>
            <div class="card">
                <h2>All Users</h2>
                <div id="admin-all-users" style="max-height: 400px; overflow-y: auto;"><p class="muted">Loading users...</p></div>
            </div>
            <div class="card">
                <h2>All Organizations</h2>
                <div id="admin-all-orgs" style="max-height: 400px; overflow-y: auto;"><p class="muted">Loading organizations...</p></div>
            </div>
        </div>

        <div id="settingsPage" class="page">
            <div class="card">
                <h2>Profile Settings</h2>
                <div class="form-group">
                    <label for="display-name">Display Name</label>
                    <input type="text" id="display-name">
                </div>
                <div class="form-group">
                    <label for="themeSelect">Theme</label>
                    <select id="themeSelect">
                        <option value="auto">Auto (Day/Night)</option>
                        <option value="light">Light</option>
                        <option value="dark">Dark</option>
                    </select>
                </div>
                <div class="form-group" id="font-customization-field">
                    <label for="display-font">Display Name Font</label>
                    <select id="display-font">
                        <option value="Inter, sans-serif">Inter (Default)</option>
                        <option value="Poppins, sans-serif">Poppins</option>
                        <option value="Roboto Mono, monospace">Roboto Mono</option>
                        <option value="Playfair Display, serif">Playfair Display</option>
                    </select>
                </div>
            </div>

            <div class="card">
                <h2>Personal Info</h2>
                <div class="form-group">
                    <label for="bio">Short Bio / Tagline</label>
                    <textarea id="bio" placeholder="A brief description of yourself."></textarea>
                </div>
                <div class="form-group">
                    <label for="birthday">Birthday</label>
                    <input type="date" id="birthday">
                </div>
                <div class="form-group">
                    <label for="country-search">Country</label>
                    <div class="country-select-wrapper">
                        <input type="text" id="country-search" placeholder="Search for a country...">
                        <div id="country-dropdown" class="country-dropdown hidden"></div>
                    </div>
                    <input type="hidden" id="country-code">
                </div>
                <div class="form-group">
                    <label for="phone-number">Public Phone Number</label>
                    <input type="tel" id="phone-number" placeholder="+1 (555) 123-4567">
                </div>
                <div class="form-group" id="scheduling-link-field">
                    <label for="scheduling-link">Scheduling Link (e.g., Calendly)</label>
                    <input type="url" id="scheduling-link" placeholder="https://calendly.com/yourname">
                </div>
            </div>

            <div class="card">
                <h2>Visual Customization</h2>
                <div class="form-group">
                    <label for="pfp-upload">Profile Picture (Upload)</label>
                    <input type="file" id="pfp-upload" accept="image/*">
                </div>
                <div class="form-group" id="accent-color-field">
                    <label for="accent-color">Profile Accent Color</label>
                    <input type="color" id="accent-color" value="#0ea5e9">
                </div>
                <div class="form-group" id="link-text-color-field">
                    <label for="link-text-color">Custom Link Text Color</label>
                    <input type="color" id="link-text-color" value="#0369a1">
                </div>
            </div>

            <div class="card">
                <h2>Update Status</h2>
                <div class="form-group">
                    <label for="status-emoji">Current Status</label>
                    <select id="status-emoji">
                        <option value="🟢">🟢 Available</option>
                        <option value="💻">💻 Busy</option>
                        <option value="🧠">🧠 Deep Work</option>
                        <option value="🚗">🚗 Commuting</option>
                        <option value="☕">☕ On a Break</option>
                        <option value="🔴">🔴 Do Not Disturb</option>
                        <option value="📚">📚 School/Study</option>
                        <option value="🏖️">🏖️ Vacation/OOO</option>
                        <option value="😴">😴 Offline/Sleeping</option>
                        <option value="🍽️">🍽️ Meal Time</option>
                        <option value="🏋️">🏋️ Working Out</option>
                        <option value="🎮">🎮 Gaming</option>
                        <option value="✈️">✈️ Traveling</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="status-message">Message</label>
                    <input type="text" id="status-message" placeholder="e.g., Drafting 2026 Strategy">
                </div>
            </div>

            <div class="card" id="automatic-timetable-card">
                <h2>Automatic Timetable ⏰</h2>
                <p class="muted" style="margin-bottom: 15px;">Set your recurring weekly schedule to update your status automatically.</p>
                <div id="timetable-entries-container">
                    <p class="muted" id="no-timetable-message">No scheduled entries yet.</p>
                </div>
                <button id="add-timetable-entry-btn" class="btn secondary" style="margin-top: 15px;">Add Schedule</button>
            </div>

            <div class="card">
                <h2>Custom Links</h2>
                <div id="custom-links-container"></div>
            </div>

            <div class="card">
                <h2>Verification</h2>
                <div id="verification-section"></div>
            </div>

            <div class="card">
                <button id="save-settings-btn" class="btn">Save All Changes</button>
                <button id="logout-btn" class="btn secondary" style="margin-top: 12px;">Logout</button>
                <button id="delete-account-btn" class="btn" style="margin-top: 20px; background-color: #ef4444; color: white;">Delete My Account Permanently</button>
            </div>
        </div>
    </div>

    <footer>
        <p>&copy; 2025 HAP | A Demo Project</p>
    </footer>

    <div id="toast"></div>
</body>
</html>
